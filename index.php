<?php
$circos = array(
  "84/01/0101/index.html", "84/01/0102/index.html", "84/01/0103/index.html", "84/01/0104/index.html", "84/01/0105/index.html", "32/02/0201/index.html", "32/02/0202/index.html", "32/02/0203/index.html", "32/02/0204/index.html", "32/02/0205/index.html", "84/03/0301/index.html", "84/03/0302/index.html", "84/03/0303/index.html", "93/04/0401/index.html", "93/04/0402/index.html", "93/05/0501/index.html", "93/05/0502/index.html", "93/06/0601/index.html", "93/06/0602/index.html", "93/06/0603/index.html", "93/06/0604/index.html", "93/06/0605/index.html", "93/06/0606/index.html", "93/06/0607/index.html", "93/06/0608/index.html", "93/06/0609/index.html", "84/07/0701/index.html", "84/07/0702/index.html", "84/07/0703/index.html", "44/08/0801/index.html", "44/08/0802/index.html", "44/08/0803/index.html", "76/09/0901/index.html", "76/09/0902/index.html", "44/10/1001/index.html", "44/10/1002/index.html", "44/10/1003/index.html", "76/11/1101/index.html", "76/11/1102/index.html", "76/11/1103/index.html", "76/12/1201/index.html", "76/12/1202/index.html", "76/12/1203/index.html", "93/13/1301/index.html", "93/13/1302/index.html", "93/13/1303/index.html", "93/13/1304/index.html", "93/13/1305/index.html", "93/13/1306/index.html", "93/13/1307/index.html", "93/13/1308/index.html", "93/13/1309/index.html", "93/13/1310/index.html", "93/13/1311/index.html", "93/13/1312/index.html", "93/13/1313/index.html", "93/13/1314/index.html", "93/13/1315/index.html", "93/13/1316/index.html", "28/14/1401/index.html", "28/14/1402/index.html", "28/14/1403/index.html", "28/14/1404/index.html", "28/14/1405/index.html", "28/14/1406/index.html", "84/15/1501/index.html", "84/15/1502/index.html", "75/16/1601/index.html", "75/16/1602/index.html", "75/16/1603/index.html", "75/17/1701/index.html", "75/17/1702/index.html", "75/17/1703/index.html", "75/17/1704/index.html", "75/17/1705/index.html", "24/18/1801/index.html", "24/18/1802/index.html", "24/18/1803/index.html", "75/19/1901/index.html", "75/19/1902/index.html", "27/21/2101/index.html", "27/21/2102/index.html", "27/21/2103/index.html", "27/21/2104/index.html", "27/21/2105/index.html", "53/22/2201/index.html", "53/22/2202/index.html", "53/22/2203/index.html", "53/22/2204/index.html", "53/22/2205/index.html", "75/23/2301/index.html", "75/24/2401/index.html", "75/24/2402/index.html", "75/24/2403/index.html", "75/24/2404/index.html", "27/25/2501/index.html", "27/25/2502/index.html", "27/25/2503/index.html", "27/25/2504/index.html", "27/25/2505/index.html", "84/26/2601/index.html", "84/26/2602/index.html", "84/26/2603/index.html", "84/26/2604/index.html", "28/27/2701/index.html", "28/27/2702/index.html", "28/27/2703/index.html", "28/27/2704/index.html", "28/27/2705/index.html", "24/28/2801/index.html", "24/28/2802/index.html", "24/28/2803/index.html", "24/28/2804/index.html", "53/29/2901/index.html", "53/29/2902/index.html", "53/29/2903/index.html", "53/29/2904/index.html", "53/29/2905/index.html", "53/29/2906/index.html", "53/29/2907/index.html", "53/29/2908/index.html", "94/2A/2A01/index.html", "94/2A/2A02/index.html", "94/2B/2B01/index.html", "94/2B/2B02/index.html", "76/30/3001/index.html", "76/30/3002/index.html", "76/30/3003/index.html", "76/30/3004/index.html", "76/30/3005/index.html", "76/30/3006/index.html", "76/31/3101/index.html", "76/31/3102/index.html", "76/31/3103/index.html", "76/31/3104/index.html", "76/31/3105/index.html", "76/31/3106/index.html", "76/31/3107/index.html", "76/31/3108/index.html", "76/31/3109/index.html", "76/31/3110/index.html", "76/32/3201/index.html", "76/32/3202/index.html", "75/33/3301/index.html", "75/33/3302/index.html", "75/33/3303/index.html", "75/33/3304/index.html", "75/33/3305/index.html", "75/33/3306/index.html", "75/33/3307/index.html", "75/33/3308/index.html", "75/33/3309/index.html", "75/33/3310/index.html", "75/33/3311/index.html", "75/33/3312/index.html", "76/34/3401/index.html", "76/34/3402/index.html", "76/34/3403/index.html", "76/34/3404/index.html", "76/34/3405/index.html", "76/34/3406/index.html", "76/34/3407/index.html", "76/34/3408/index.html", "76/34/3409/index.html", "53/35/3501/index.html", "53/35/3502/index.html", "53/35/3503/index.html", "53/35/3504/index.html", "53/35/3505/index.html", "53/35/3506/index.html", "53/35/3507/index.html", "53/35/3508/index.html", "24/36/3601/index.html", "24/36/3602/index.html", "24/37/3701/index.html", "24/37/3702/index.html", "24/37/3703/index.html", "24/37/3704/index.html", "24/37/3705/index.html", "84/38/3801/index.html", "84/38/3802/index.html", "84/38/3803/index.html", "84/38/3804/index.html", "84/38/3805/index.html", "84/38/3806/index.html", "84/38/3807/index.html", "84/38/3808/index.html", "84/38/3809/index.html", "84/38/3810/index.html", "27/39/3901/index.html", "27/39/3902/index.html", "27/39/3903/index.html", "75/40/4001/index.html", "75/40/4002/index.html", "75/40/4003/index.html", "24/41/4101/index.html", "24/41/4102/index.html", "24/41/4103/index.html", "84/42/4201/index.html", "84/42/4202/index.html", "84/42/4203/index.html", "84/42/4204/index.html", "84/42/4205/index.html", "84/42/4206/index.html", "84/43/4301/index.html", "84/43/4302/index.html", "52/44/4401/index.html", "52/44/4402/index.html", "52/44/4403/index.html", "52/44/4404/index.html", "52/44/4405/index.html", "52/44/4406/index.html", "52/44/4407/index.html", "52/44/4408/index.html", "52/44/4409/index.html", "52/44/4410/index.html", "24/45/4501/index.html", "24/45/4502/index.html", "24/45/4503/index.html", "24/45/4504/index.html", "24/45/4505/index.html", "24/45/4506/index.html", "76/46/4601/index.html", "76/46/4602/index.html", "75/47/4701/index.html", "75/47/4702/index.html", "75/47/4703/index.html", "76/48/4801/index.html", "52/49/4901/index.html", "52/49/4902/index.html", "52/49/4903/index.html", "52/49/4904/index.html", "52/49/4905/index.html", "52/49/4906/index.html", "52/49/4907/index.html", "28/50/5001/index.html", "28/50/5002/index.html", "28/50/5003/index.html", "28/50/5004/index.html", "44/51/5101/index.html", "44/51/5102/index.html", "44/51/5103/index.html", "44/51/5104/index.html", "44/51/5105/index.html", "44/52/5201/index.html", "44/52/5202/index.html", "52/53/5301/index.html", "52/53/5302/index.html", "52/53/5303/index.html", "44/54/5401/index.html", "44/54/5402/index.html", "44/54/5403/index.html", "44/54/5404/index.html", "44/54/5405/index.html", "44/54/5406/index.html", "44/55/5501/index.html", "44/55/5502/index.html", "53/56/5601/index.html", "53/56/5602/index.html", "53/56/5603/index.html", "53/56/5604/index.html", "53/56/5605/index.html", "53/56/5606/index.html", "44/57/5701/index.html", "44/57/5702/index.html", "44/57/5703/index.html", "44/57/5704/index.html", "44/57/5705/index.html", "44/57/5706/index.html", "44/57/5707/index.html", "44/57/5708/index.html", "44/57/5709/index.html", "27/58/5801/index.html", "27/58/5802/index.html", "32/59/5901/index.html", "32/59/5902/index.html", "32/59/5903/index.html", "32/59/5904/index.html", "32/59/5905/index.html", "32/59/5906/index.html", "32/59/5907/index.html", "32/59/5908/index.html", "32/59/5909/index.html", "32/59/5910/index.html", "32/59/5911/index.html", "32/59/5912/index.html", "32/59/5913/index.html", "32/59/5914/index.html", "32/59/5915/index.html", "32/59/5916/index.html", "32/59/5917/index.html", "32/59/5918/index.html", "32/59/5919/index.html", "32/59/5920/index.html", "32/59/5921/index.html", "32/60/6001/index.html", "32/60/6002/index.html", "32/60/6003/index.html", "32/60/6004/index.html", "32/60/6005/index.html", "32/60/6006/index.html", "32/60/6007/index.html", "28/61/6101/index.html", "28/61/6102/index.html", "28/61/6103/index.html", "32/62/6201/index.html", "32/62/6202/index.html", "32/62/6203/index.html", "32/62/6204/index.html", "32/62/6205/index.html", "32/62/6206/index.html", "32/62/6207/index.html", "32/62/6208/index.html", "32/62/6209/index.html", "32/62/6210/index.html", "32/62/6211/index.html", "32/62/6212/index.html", "84/63/6301/index.html", "84/63/6302/index.html", "84/63/6303/index.html", "84/63/6304/index.html", "84/63/6305/index.html", "75/64/6401/index.html", "75/64/6402/index.html", "75/64/6403/index.html", "75/64/6404/index.html", "75/64/6405/index.html", "75/64/6406/index.html", "76/65/6501/index.html", "76/65/6502/index.html", "76/66/6601/index.html", "76/66/6602/index.html", "76/66/6603/index.html", "76/66/6604/index.html", "44/67/6701/index.html", "44/67/6702/index.html", "44/67/6703/index.html", "44/67/6704/index.html", "44/67/6705/index.html", "44/67/6706/index.html", "44/67/6707/index.html", "44/67/6708/index.html", "44/67/6709/index.html", "44/68/6801/index.html", "44/68/6802/index.html", "44/68/6803/index.html", "44/68/6804/index.html", "44/68/6805/index.html", "44/68/6806/index.html", "84/69/6901/index.html", "84/69/6902/index.html", "84/69/6903/index.html", "84/69/6904/index.html", "84/69/6905/index.html", "84/69/6906/index.html", "84/69/6907/index.html", "84/69/6908/index.html", "84/69/6909/index.html", "84/69/6910/index.html", "84/69/6911/index.html", "84/69/6912/index.html", "84/69/6913/index.html", "84/69/6914/index.html", "27/70/7001/index.html", "27/70/7002/index.html", "27/71/7101/index.html", "27/71/7102/index.html", "27/71/7103/index.html", "27/71/7104/index.html", "27/71/7105/index.html", "52/72/7201/index.html", "52/72/7202/index.html", "52/72/7203/index.html", "52/72/7204/index.html", "52/72/7205/index.html", "84/73/7301/index.html", "84/73/7302/index.html", "84/73/7303/index.html", "84/73/7304/index.html", "84/74/7401/index.html", "84/74/7402/index.html", "84/74/7403/index.html", "84/74/7404/index.html", "84/74/7405/index.html", "84/74/7406/index.html", "11/75/7501/index.html", "11/75/7502/index.html", "11/75/7503/index.html", "11/75/7504/index.html", "11/75/7505/index.html", "11/75/7506/index.html", "11/75/7507/index.html", "11/75/7508/index.html", "11/75/7509/index.html", "11/75/7510/index.html", "11/75/7511/index.html", "11/75/7512/index.html", "11/75/7513/index.html", "11/75/7514/index.html", "11/75/7515/index.html", "11/75/7516/index.html", "11/75/7517/index.html", "11/75/7518/index.html", "28/76/7601/index.html", "28/76/7602/index.html", "28/76/7603/index.html", "28/76/7604/index.html", "28/76/7605/index.html", "28/76/7606/index.html", "28/76/7607/index.html", "28/76/7608/index.html", "28/76/7609/index.html", "28/76/7610/index.html", "11/77/7701/index.html", "11/77/7702/index.html", "11/77/7703/index.html", "11/77/7704/index.html", "11/77/7705/index.html", "11/77/7706/index.html", "11/77/7707/index.html", "11/77/7708/index.html", "11/77/7709/index.html", "11/77/7710/index.html", "11/77/7711/index.html", "11/78/7801/index.html", "11/78/7802/index.html", "11/78/7803/index.html", "11/78/7804/index.html", "11/78/7805/index.html", "11/78/7806/index.html", "11/78/7807/index.html", "11/78/7808/index.html", "11/78/7809/index.html", "11/78/7810/index.html", "11/78/7811/index.html", "11/78/7812/index.html", "75/79/7901/index.html", "75/79/7902/index.html", "75/79/7903/index.html", "32/80/8001/index.html", "32/80/8002/index.html", "32/80/8003/index.html", "32/80/8004/index.html", "32/80/8005/index.html", "76/81/8101/index.html", "76/81/8102/index.html", "76/81/8103/index.html", "76/82/8201/index.html", "76/82/8202/index.html", "93/83/8301/index.html", "93/83/8302/index.html", "93/83/8303/index.html", "93/83/8304/index.html", "93/83/8305/index.html", "93/83/8306/index.html", "93/83/8307/index.html", "93/83/8308/index.html", "93/84/8401/index.html", "93/84/8402/index.html", "93/84/8403/index.html", "93/84/8404/index.html", "93/84/8405/index.html", "52/85/8501/index.html", "52/85/8502/index.html", "52/85/8503/index.html", "52/85/8504/index.html", "52/85/8505/index.html", "75/86/8601/index.html", "75/86/8602/index.html", "75/86/8603/index.html", "75/86/8604/index.html", "75/87/8701/index.html", "75/87/8702/index.html", "75/87/8703/index.html", "44/88/8801/index.html", "44/88/8802/index.html", "44/88/8803/index.html", "44/88/8804/index.html", "27/89/8901/index.html", "27/89/8902/index.html", "27/89/8903/index.html", "27/90/9001/index.html", "27/90/9002/index.html", "11/91/9101/index.html", "11/91/9102/index.html", "11/91/9103/index.html", "11/91/9104/index.html", "11/91/9105/index.html", "11/91/9106/index.html", "11/91/9107/index.html", "11/91/9108/index.html", "11/91/9109/index.html", "11/91/9110/index.html", "11/92/9201/index.html", "11/92/9202/index.html", "11/92/9203/index.html", "11/92/9204/index.html", "11/92/9205/index.html", "11/92/9206/index.html", "11/92/9207/index.html", "11/92/9208/index.html", "11/92/9209/index.html", "11/92/9210/index.html", "11/92/9211/index.html", "11/92/9212/index.html", "11/92/9213/index.html", "11/93/9301/index.html", "11/93/9302/index.html", "11/93/9303/index.html", "11/93/9304/index.html", "11/93/9305/index.html", "11/93/9306/index.html", "11/93/9307/index.html", "11/93/9308/index.html", "11/93/9309/index.html", "11/93/9310/index.html", "11/93/9311/index.html", "11/93/9312/index.html", "11/94/9401/index.html", "11/94/9402/index.html", "11/94/9403/index.html", "11/94/9404/index.html", "11/94/9405/index.html", "11/94/9406/index.html", "11/94/9407/index.html", "11/94/9408/index.html", "11/94/9409/index.html", "11/94/9410/index.html", "11/94/9411/index.html", "11/95/9501/index.html", "11/95/9502/index.html", "11/95/9503/index.html", "11/95/9504/index.html", "11/95/9505/index.html", "11/95/9506/index.html", "11/95/9507/index.html", "11/95/9508/index.html", "11/95/9509/index.html", "11/95/9510/index.html", "01/971/97101/index.html", "01/971/97102/index.html", "01/971/97103/index.html", "01/971/97104/index.html", "02/972/97201/index.html", "02/972/97202/index.html", "02/972/97203/index.html", "02/972/97204/index.html", "03/973/97301/index.html", "03/973/97302/index.html", "04/974/97401/index.html", "04/974/97402/index.html", "04/974/97403/index.html", "04/974/97404/index.html", "04/974/97405/index.html", "04/974/97406/index.html", "04/974/97407/index.html", "975/97501/index.html", "06/976/97601/index.html", "06/976/97602/index.html", "986/98601/index.html", "987/98701/index.html", "987/98702/index.html", "987/98703/index.html", "988/98801/index.html", "988/98802/index.html", "ZX/ZX01/index.html", "ZZ/ZZ01/index.html", "ZZ/ZZ02/index.html", "ZZ/ZZ03/index.html", "ZZ/ZZ04/index.html", "ZZ/ZZ05/index.html", "ZZ/ZZ06/index.html", "ZZ/ZZ07/index.html", "ZZ/ZZ08/index.html", "ZZ/ZZ09/index.html", "ZZ/ZZ10/index.html", "ZZ/ZZ11/index.html");

$results = "";

foreach($circos as $c){
  $url = "https://www.resultats-elections.interieur.gouv.fr/legislatives2024/ensemble_geographique/" . $c;
  $content = file_get_contents($url);
  
  $doc = new DOMDocument();
  @$doc->loadHTML($content);
  
  $ext_circo = $doc->getElementsByTagName('h4')[0]->textContent;
  $tab_circo = explode("(", $ext_circo);
  
  $circo = trim(str_replace(")", "", $tab_circo[1]));
  
  $line = $circo;
  
  $table = $doc->getElementsByTagName('tr');
  foreach($table as $tr){
    $td = $tr->getElementsByTagName('td');
    if($td[5]){
      if(str_contains($td[5]->textContent, "OUI")){
        $candidat = trim($td[0]->textContent);
        $parti = trim($td[1]->textContent);
        $line .= ' ; ' . $parti . " ELU";
        break;
      }
      if(str_contains($td[5]->textContent, "QUALIF T2")){
        $candidat = trim($td[0]->textContent);
        $parti = trim($td[1]->textContent);
        $score = trim($td[4]->textContent);
        $line .= ' ; ' . $parti . " " . $score;
      }
    }
  }
  
  $line .= '<br/>';
  
  $results .= $line;
  }

echo $results;
?>